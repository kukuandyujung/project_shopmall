<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.java.mapper.MemberMapper">

<!-- 회원 정보 전체 가져오기 -->
<select id="selectAll" resultType="com.java.dto.MemberDto">
  SELECT * FROM zebra WHERE MCODE != 0
  
  	 <if test="category == 'all'">
	     where btitle like '%'||#{s_word}||'%' or bcontent like '%'||#{s_word}||'%'
	 </if>
	 <if test="category == 'btitle'">
	     where btitle like '%'||#{s_word}||'%'
	 </if>
	 <if test="category == 'bcontent'">
	     where bcontent like '%'||#{s_word}||'%'
	 </if>
	 
    <if test="#{s_word} != null">
      AND (
        MID LIKE '%' || #{s_word} || '%'
        OR MNAME LIKE '%' || #{s_word} || '%'
        OR MGENDER LIKE '%' || #{s_word} || '%'
        OR MPHONE LIKE '%' || #{s_word} || '%'
        OR MEMAIL LIKE '%' || #{s_word} || '%'
        OR MJOINDAY LIKE '%' || #{s_word} || '%'
        OR MTOTAL_PAY LIKE '%' || #{s_word} || '%'
        OR MTOTAL_ORDER LIKE '%' || #{s_word} || '%'
      )
      
    </if>
  ORDER BY MCODE ASC
</select>

<!-- 회원 정보 1개 가져오기 -->
<select id="selectOne" resultType="com.java.dto.MemberDto">
   select * from zebra where MID=#{MID}
</select>

<!-- 회원 정보 1개 수정 -->
<update id="updateOne">
   update ZEBRA set MNAME=#{MNAME},MPHONE=#{MPHONE},MEMAIL=#{MEMAIL} 
   where MID=#{MID}
</update>

<!-- 회원 정보 1개 삭제 -->
<delete id="deleteOne">
   delete ZEBRA where MID=#{MID}
</delete>

<!--관리자 로그인 확인-->
<select id="selectLogin" resultType="com.java.dto.MemberDto" >
	select * from zebra where MID=#{MID} and MPASSWORD=#{MPASSWORD}
</select>

	
<!--  START SUN  -->

<!--회원 로그인 확인-->
<select id="selectLoginMember" resultType="com.java.dto.MemberDto" >
	select * from zebra where MID=#{MID} and MPASSWORD=#{MPASSWORD}
</select>

<!--  END SUN  -->

</mapper>